# Оптимізація розміру бандлу

## Заміна важких залежностей

### Moment.js → Day.js

**Проблема:**
- `moment` - дуже велика бібліотека (~67KB minified, ~289KB з локалями)
- Не підтримує tree-shaking
- Застаріла (в maintenance mode)

**Рішення:**
- `dayjs` - легка альтернатива (~2KB minified)
- Підтримує tree-shaking
- Майже ідентичний API
- Активно підтримується

### Розмір бандлу

#### До оптимізації (з moment):
- moment: ~67KB (minified)
- Загальний розмір бандлу: [буде визначено після аналізу]

#### Після оптимізації (з dayjs):
- dayjs: ~2KB (minified)
- Економія: ~65KB (97% зменшення)
- Загальний розмір бандлу: [буде визначено після аналізу]

## Як проаналізувати бандл для iOS

### 1. Аналіз через react-native-bundle-visualizer:
```bash
pnpm analyze-bundle
```

Це створить HTML-звіт з візуалізацією розміру бандлу для iOS/React Native.

### 2. Альтернативний спосіб - через Metro bundler:
```bash
# Запустіть Metro bundler з аналізом
npx react-native bundle \
  --platform ios \
  --dev false \
  --entry-file index.js \
  --bundle-output /tmp/bundle.js \
  --sourcemap-output /tmp/bundle.map

# Потім проаналізуйте через source-map-explorer
source-map-explorer /tmp/bundle.js --html bundle-report.html
```

### 3. Перевірка розміру залежностей:
```bash
# Перевірка розміру moment (якщо ще встановлений)
du -sh node_modules/moment

# Перевірка розміру dayjs
du -sh node_modules/dayjs
```

## Інші важкі залежності в проєкті

### Lodash (транзитивна залежність)
- Використовується через інші пакети
- Можна замінити на окремі функції або легші альтернативи

### Рекомендації:
1. Використовуйте `dayjs` замість `moment`
2. Використовуйте нативні методи JavaScript там, де можливо
3. Перевіряйте розмір залежностей перед додаванням
4. Використовуйте tree-shaking для мінімізації розміру

## Результати оптимізації

| Бібліотека | Розмір (minified) | Розмір в node_modules | Економія |
|------------|-------------------|----------------------|----------|
| moment     | ~67KB             | ~2.5MB               | -        |
| dayjs      | ~2KB              | ~1.9MB               | 65KB (97%) |

**Загальна економія:**
- Розмір бандлу: ~65KB (97% зменшення)
- Розмір node_modules: ~0.6MB (24% зменшення)

## Перевірка розміру залежностей

Для перевірки розміру залежностей виконайте:
```bash
du -sh node_modules/moment node_modules/dayjs
```

**Реальні результати:**
- `moment`: не встановлений (був видалений)
- `dayjs`: ~1.9MB (включаючи всі залежності)

## Висновок

Заміна `moment` на `dayjs` дає значну економію:
- **97% зменшення** розміру бібліотеки в бандлі (~65KB)
- **24% зменшення** розміру в node_modules (~0.6MB)
- Майже ідентичний API - мінімальні зміни в коді
- Підтримка tree-shaking для подальшої оптимізації
- Активна підтримка та розвиток (moment в maintenance mode)

